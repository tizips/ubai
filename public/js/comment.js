jQuery(document).ready(function(e){var t=e("#cancel-comment-reply-link"),r=t.text(),n="commentlist";e(document).on("submit","#commentform",function(){return e.ajax({url:ajaxcomment.ajax_url,data:e(this).serialize(),type:e(this).attr("method"),beforeSend:addComment.createButterbar("提交中...."),error:function(e){var t=addComment;t.createButterbar(e.responseText)},success:function(t){e("textarea").each(function(){this.value=""});var r=addComment,o=r.I("cancel-comment-reply-link"),a=r.I("wp-temp-form-div"),m=r.I(r.respondId),c=(r.I("comment_post_ID").value,r.I("comment_parent").value);return t.error?(r.createButterbar(t.error),!1):("0"!=c?e("#respond").before('<ol class="children">'+t+"</ol>"):e("."+n).length?"asc"==ajaxcomment.order?e("."+n).append(t):e("."+n).prepend(t):"bottom"==ajaxcomment.formpostion?e("#respond").before('<ol class="'+n+'">'+t+"</ol>"):e("#respond").after('<ol class="'+n+'">'+t+"</ol>"),r.createButterbar("提交成功"),o.style.display="none",o.onclick=null,r.I("comment_parent").value="0",void(a&&m&&(a.parentNode.insertBefore(m,a),a.parentNode.removeChild(a))))}}),!1}),addComment={moveForm:function(n,o,a){var m,c=this,d=c.I(n),l=c.I(a),p=c.I("cancel-comment-reply-link"),i=c.I("comment_parent");c.I("comment_post_ID");t.text(r),c.respondId=a,c.I("wp-temp-form-div")||(m=document.createElement("div"),m.id="wp-temp-form-div",m.style.display="none",l.parentNode.insertBefore(m,l)),d?d.parentNode.insertBefore(l,d.nextSibling):(temp=c.I("wp-temp-form-div"),c.I("comment_parent").value="0",temp.parentNode.insertBefore(l,temp),temp.parentNode.removeChild(temp)),e("body").animate({scrollTop:e("#respond").offset().top-180},400),i.value=o,p.style.display="",p.onclick=function(){var e=addComment,t=e.I("wp-temp-form-div"),r=e.I(e.respondId);return e.I("comment_parent").value="0",t&&r&&(t.parentNode.insertBefore(r,t),t.parentNode.removeChild(t)),this.style.display="none",this.onclick=null,!1};try{c.I("comment").focus()}catch(s){}return!1},I:function(e){return document.getElementById(e)},clearButterbar:function(t){e(".butterBar").length>0&&e(".butterBar").remove()},createButterbar:function(t){var r=this;r.clearButterbar(),e("body").append('<div class="butterBar butterBar-center"><p class="butterBar-message">'+t+"</p></div>"),setTimeout("jQuery('.butterBar').remove()",3e3)}}});